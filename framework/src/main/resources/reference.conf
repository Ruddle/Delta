kamon {

  metric {

    filters {
      akka-actor {
        includes = [ "akka-system/user/host_*" ]
        excludes = [ "akka-system/system/**"]
      }

      akka-dispatcher {
        includes = [ "akka-system/akka.actor.default-dispatcher", "akka-system/database-dispatcher" ]
      }

      akka-router {
     //   includes = [ "akka-system/user/**" ]
      }
    }

    tick-interval = 1 seconds
  }

  trace {
    level-of-detail = simple-trace
    sampling = all
  }

  system-metrics {
    #sigar is enabled by default
    sigar-enabled = true

    #jmx related metrics are enabled by default
    jmx-enabled = true
  }

  influxdb {

    # Hostname and port in which your InfluxDB is running
    hostname = "127.0.0.1"
    port = 8998

    # The maximum packet size for one POST request, set to 0 to disable batching
    max-packet-size = 16384

    # The database where to write in InfluxDB. Works only for HTTP protocol, if using UDP, change the database in your
    # InfluxDB configuration
    database = "test1"

    # The protocol, either http or udp
    protocol = "udp"

    # The measurements will be named ${application-name}-timers and -counters
    application-name = "test1"

    # Allow users to override the name of the hostname reported by kamon. When changed, the hostname tag will be
    # the value given here.
    hostname-override = none

    # For histograms, which percentiles to count
    percentiles = [50.0, 70.0, 90.0, 95.0, 99.0, 99.9]

    # Subscription patterns used to select which metrics will be pushed to InfluxDB. Note that first, metrics
    # collection for your desired entities must be activated under the kamon.metrics.filters settings.
    subscriptions {
      histogram = ["**"]
      min-max-counter = ["**"]
      gauge = ["**"]
      counter = ["**"]
      trace = ["**"]
      trace-segment = ["**"]
      akka-actor = ["**"]
      akka-dispatcher = ["**"]
      akka-router = ["**"]
      system-metric = ["**"]
      http-server = ["**"]
    }
  }

  modules {
    kamon-influxdb {
      requires-aspectj = yes
      auto-start = yes
      extension-class = "kamon.influxdb.InfluxDB"
    }
  }
}